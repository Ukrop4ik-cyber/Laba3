@model WebApplication2.Models.Order
@{
    ViewData["Title"] = "Підтвердження замовлення";
}

<div class="container my-5">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <!-- Success Message -->
            <div class="text-center mb-5">
                <div class="mb-4">
                    <i class="fas fa-check-circle text-success" style="font-size: 5rem;"></i>
                </div>
                <h1 class="mb-3">Дякуємо за замовлення!</h1>
                <p class="lead text-muted">Ваше замовлення успішно оформлено</p>
            </div>

            <!-- Order Details Card -->
            <div class="card shadow-sm mb-4">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-info-circle"></i> Деталі замовлення
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <strong>Номер замовлення:</strong>
                        </div>
                        <div class="col-md-6">
                            <span class="badge bg-primary fs-6">@Model.OrderNumber</span>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <strong>Дата оформлення:</strong>
                        </div>
                        <div class="col-md-6">
                            @Model.CreatedAt.ToString("dd.MM.yyyy HH:mm")
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <strong>Статус:</strong>
                        </div>
                        <div class="col-md-6">
                            <span class="status-badge status-new">Нове замовлення</span>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <strong>Загальна сума:</strong>
                        </div>
                        <div class="col-md-6">
                            <h4 class="text-primary mb-0">@Model.TotalAmount.ToString("N0") грн</h4>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Customer Info -->
            <div class="card shadow-sm mb-4">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-user"></i> Контактна інформація
                    </h5>
                </div>
                <div class="card-body">
                    <p class="mb-2"><strong>ПІБ:</strong> @Model.CustomerName</p>
                    <p class="mb-2"><strong>Телефон:</strong> @Model.CustomerPhone</p>
                    <p class="mb-2"><strong>Email:</strong> @Model.CustomerEmail</p>
                </div>
            </div>

            <!-- Delivery Info -->
            <div class="card shadow-sm mb-4">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-truck"></i> Доставка та оплата
                    </h5>
                </div>
                <div class="card-body">
                    <p class="mb-2"><strong>Спосіб доставки:</strong> @Model.DeliveryMethod</p>
                    <p class="mb-2"><strong>Адреса:</strong> @Model.DeliveryAddress</p>
                    <p class="mb-2"><strong>Спосіб оплати:</strong> @Model.PaymentMethod</p>
                    @if (!string.IsNullOrEmpty(Model.Notes))
                    {
                        <p class="mb-0"><strong>Коментар:</strong> @Model.Notes</p>
                    }
                </div>
            </div>

            <!-- Order Items -->
            <div class="card shadow-sm mb-4">
                <div class="card-header bg-warning">
                    <h5 class="mb-0">
                        <i class="fas fa-shopping-cart"></i> Склад замовлення
                    </h5>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-sm">
                            <thead>
                                <tr>
                                    <th>Товар</th>
                                    <th class="text-center">Кількість</th>
                                    <th class="text-end">Ціна</th>
                                    <th class="text-end">Сума</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var item in Model.OrderItems)
                                {
                                    <tr>
                                        <td>@item.ProductName</td>
                                        <td class="text-center">@item.Quantity</td>
                                        <td class="text-end">@item.Price.ToString("N0") грн</td>
                                        <td class="text-end">@item.TotalPrice.ToString("N0") грн</td>
                                    </tr>
                                }
                            </tbody>
                            <tfoot>
                                @{
                                    var subtotal = Model.TotalAmount - Model.DeliveryPrice;
                                }
                                <tr>
                                    <td colspan="3" class="text-end"><strong>Вартість товарів:</strong></td>
                                    <td class="text-end">@subtotal.ToString("N0") грн</td>
                                </tr>
                                <tr>
                                    <td colspan="3" class="text-end"><strong>Доставка:</strong></td>
                                    <td class="text-end">@Model.DeliveryPrice.ToString("N0") грн</td>
                                </tr>
                                <tr class="table-primary">
                                    <td colspan="3" class="text-end"><strong>ВСЬОГО:</strong></td>
                                    <td class="text-end"><strong>@Model.TotalAmount.ToString("N0") грн</strong></td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Alert -->
            <div class="alert alert-info">
                <i class="fas fa-info-circle"></i>
                <strong>Важливо!</strong> Підтвердження замовлення відправлено на вашу електронну пошту 
                <strong>@Model.CustomerEmail</strong>. Наш менеджер зв'яжеться з вами найближчим часом.
            </div>

            <!-- Action Buttons -->
            <div class="d-grid gap-2 d-md-flex justify-content-md-center">
                <a asp-controller="Order" asp-action="DownloadReceipt" asp-route-id="@Model.Id" 
                   class="btn btn-primary">
                    <i class="fas fa-download"></i> Завантажити чек
                </a>
                <a asp-controller="Account" asp-action="Orders" class="btn btn-outline-primary">
                    <i class="fas fa-list"></i> Мої замовлення
                </a>
                <a asp-controller="Home" asp-action="Index" class="btn btn-outline-secondary">
                    <i class="fas fa-home"></i> На головну
                </a>
            </div>
        </div>
    </div>
</div>